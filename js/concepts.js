document.addEventListener('DOMContentLoaded', function () {
    const modal = document.getElementById('concept-modal');
    const modalBody = document.getElementById('concept-modal-body');
    const closeModal = document.querySelector('.concept-modal-close');
    const overlay = modal;

    // Увеличенные категории с апперцепцией и другими понятиями
    const categories = {
        being: {
            title: 'Бытие и реальность',
            concepts: [
                { name: 'Ноумен', desc: 'Вещь в себе, недоступная чувственному восприятию, но предполагаемая разумом (Кант).' },
                { name: 'Феномен', desc: 'Явление, то, как объект дан в опыте (Кант).' },
                { name: 'Субстанция', desc: 'То, что существует само по себе и не зависит от других сущностей (Аристотель, Спиноза).' },
                { name: 'Акциденция', desc: 'Случайное свойство, не входящее в сущность вещи.' },
                { name: 'Бытие', desc: 'Фундаментальная категория философии, обозначающая существование.' },
                { name: 'Ничто', desc: 'Отрицание бытия, часто используется в экзистенциализме (Хайдеггер).' }
            ]
        },
        knowledge: {
            title: 'Познание',
            concepts: [
                { name: 'Субъективность', desc: 'Зависимость знания от индивидуального сознания и восприятия.' },
                { name: 'Объективность', desc: 'Независимость истины от личного мнения или восприятия.' },
                { name: 'Априори', desc: 'Знание, независимое от опыта (например, математические истины).' },
                { name: 'Апостериори', desc: 'Знание, полученное из опыта.' },
                { name: 'Апперцепция', desc: 'Самосознание как условие возможности опыта (Кант: "трансцендентальная апперцепция").' },
                { name: 'Интуиция', desc: 'Непосредственное постижение истины без логического вывода (Бергсон, Шопенгауэр).' },
                { name: 'Разум', desc: 'Высшая форма познания, способная к абстракции и логике.' },
                { name: 'Рассудок', desc: 'Факультет классификации и анализа (в отличие от целостного разума у Гегеля).' }
            ]
        },
        human: {
            title: 'Человек',
            concepts: [
                { name: 'Экзистенция', desc: 'Человеческое существование как свобода, тревога и ответственность (Сартр, Ясперс).' },
                { name: 'Субъект', desc: 'Носитель сознания, противопоставляемый объекту познания.' },
                { name: 'Индивид', desc: 'Отдельный человек как биологическое и социальное существо.' },
                { name: 'Личность', desc: 'Социально и духовно развитый индивид с самосознанием и свободой выбора.' },
                { name: 'Дух', desc: 'Высшая форма сознания, способная к творчеству и самопревосхождению.' },
                { name: 'Плоть', desc: 'Телесное измерение человека (Мерло-Понти, христианская философия).' }
            ]
        },
        values: {
            title: 'Ценности',
            concepts: [
                { name: 'Добро', desc: 'Моральное качество, направленное на пользу другим и согласие с нравственными нормами.' },
                { name: 'Зло', desc: 'Разрушительное, антигуманное начало в поведении или намерении.' },
                { name: 'Свобода', desc: 'Способность действовать по собственному выбору, не обусловленному внешними причинами.' },
                { name: 'Детерминация', desc: 'Обусловленность всех событий причинно-следственными связями.' },
                { name: 'Справедливость', desc: 'Соответствие деяния заслугам или нормам права и морали.' },
                { name: 'Красота', desc: 'Ценность, связанная с гармонией, совершенством и эстетическим восприятием.' }
            ]
        },
        language: {
            title: 'Язык и смысл',
            concepts: [
                { name: 'Знак', desc: 'Материальный носитель значения (слово, жест, символ).' },
                { name: 'Референт', desc: 'Предмет, на который указывает знак.' },
                { name: 'Значение', desc: 'Идеальное содержание знака, общее для всех говорящих на языке.' },
                { name: 'Дискурс', desc: 'Речевая практика, формирующая знание и власть (Фуко).' },
                { name: 'Парадигма', desc: 'Модель научного мышления, определяющая нормы исследования (Кун).' }
            ]
        },
        other: {
            title: 'Прочее',
            concepts: [
                { name: 'Апория', desc: 'Логическое затруднение, неразрешимое противоречие в рассуждении (Зенон, Платон).' },
                { name: 'Тавтология', desc: 'Логически истинное высказывание, не несущее новой информации.' },
                { name: 'Онтология', desc: 'Раздел философии, изучающий бытие как таковое.' },
                { name: 'Эпистемология', desc: 'Теория познания, исследующая природу, границы и критерии знания.' },
                { name: 'Трансцендентность', desc: 'То, что лежит за пределами возможного опыта (Бог, мир как целое — у Канта).' },
                { name: 'Имманентность', desc: 'Присутствие высшего начала внутри мира или сознания.' },
                { name: 'Синтез', desc: 'Объединение противоположных начал в более высоком целом (Гегель).' },
                { name: 'Диалектика', desc: 'Метод познания через противоречия и их разрешение.' }
            ]
        }
    };

    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const category = btn.dataset.category;
            const cat = categories[category];
            if (!cat) return;

            let content = `<h2>${cat.title}</h2>`;
            cat.concepts.forEach(c => {
                content += `
                    <div style="margin: 15px 0; padding: 15px; background: #f8f5ee; border-radius: 8px;">
                        <strong>${c.name}</strong>
                        <p>${c.desc}</p>
                    </div>
                `;
            });

            modalBody.innerHTML = content;
            modal.style.display = 'flex';
        });
    });

    
    [closeModal, overlay].forEach(el => {
        el.addEventListener('click', () => modal.style.display = 'none');
    });

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') modal.style.display = 'none';
    });

    
    modal.addEventListener('wheel', (e) => {
        if (modal.style.display === 'flex') {
            e.stopPropagation();
        }
    });
});